// ============================================================================
// AUTO-GENERATED by ANG (Architectural Normalized Generator)
// Version: 0.1.0
// InputHash: 0e42fb765c8c4c998929a35e33a0793d5ab856e841197e70e8443d4462dc8d2e
// CompilerHash: da4c69e77ddf4e94b49ea759dde0b35e42355a2b062317f6274172a1164123b5
// DO NOT EDIT - changes will be overwritten on next generation
// GENERATED: true
// ============================================================================

// Package domain contains domain entities and business logic.
package domain

import (
	"fmt"
	"log/slog"
)

// Post represents the domain entity.
// Source: cue/domain/entities.cue:61
type Post struct {
	// Source: cue/domain/entities.cue:62
	Name string `json:"name"`
	// Source: cue/domain/entities.cue:63
	Description string `json:"description"`
	// Source: cue/domain/entities.cue:65
	Fields any `json:"fields"`
}

// LogValue implements slog.LogValuer interface.
// It automatically masks fields marked as @secret or @pii.
func (e *Post) LogValue() slog.Value {
	return slog.GroupValue(
		slog.Any("name", e.Name),
		slog.Any("description", e.Description),
		slog.Any("fields", e.Fields),
	)
}

// NewPost creates a new instance of Post with default values.
func NewPost() *Post {
	return &Post{
		Name:        "Post",
		Description: "Blog post/article",
	}
}

// CanTransitionTo checks if the state transition is allowed.
func (e *Post) CanTransitionTo(target string) bool {
	switch e.Status {
	}
	return false
}

// TransitionTo performs the state transition.
func (e *Post) TransitionTo(target string) error {
	if !e.CanTransitionTo(target) {
		return fmt.Errorf("invalid transition from %s to %s", e.Status, target)
	}
	e.Status = target
	return nil
}
