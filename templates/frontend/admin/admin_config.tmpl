// Generated by ANG. Do not edit.
import { lazy, ComponentType } from 'react';

export interface AdminEntityConfig {
  key: string;
  title: string;
  routePath: string;
  listQueryKey: [string, string];
  useListQuery: () => any;
  TableComponent: ComponentType<any>;
  CreateFormComponent?: ComponentType<any>;
  UpdateFormComponent?: ComponentType<any>;
  useDeleteMutation?: () => any;
  deleteIdField?: string;
  updateIdField?: string; // Maps row.id to this field name for update form
}

// Lazy load components
{{- range .Entities }}
const {{ .TableComponent }} = lazy(() => import('@sdk/components/tables').then(m => ({ default: m.{{ .TableComponent }} })));
{{- if .HasCreate }}
const {{ .CreateFormComponent }} = lazy(() => import('@sdk/components/forms').then(m => ({ default: m.{{ .CreateFormComponent }} })));
{{- end }}
{{- if .HasUpdate }}
const {{ .UpdateFormComponent }} = lazy(() => import('@sdk/components/forms').then(m => ({ default: m.{{ .UpdateFormComponent }} })));
{{- end }}
{{- end }}

// Import hooks
{{- range .Entities }}
import { use{{ .ListRPC }} } from '@sdk/hooks';
{{- if .HasDelete }}
import { use{{ .DeleteRPC }} } from '@sdk/hooks';
{{- end }}
{{- end }}

export const adminEntities: AdminEntityConfig[] = [
{{- range .Entities }}
  {
    key: '{{ .Key }}',
    title: '{{ .Title }}',
    routePath: '{{ .RoutePath }}',
    listQueryKey: ['{{ .ServiceName }}', '{{ .ListRPC }}'],
    useListQuery: use{{ .ListRPC }},
    TableComponent: {{ .TableComponent }},
{{- if .HasCreate }}
    CreateFormComponent: {{ .CreateFormComponent }},
{{- end }}
{{- if .HasUpdate }}
    UpdateFormComponent: {{ .UpdateFormComponent }},
{{- if .UpdateIDField }}
    updateIdField: '{{ .UpdateIDField }}',
{{- end }}
{{- end }}
{{- if .HasDelete }}
    useDeleteMutation: use{{ .DeleteRPC }},
    deleteIdField: '{{ .DeleteIDField }}',
{{- end }}
  },
{{- end }}
];

export const adminEntitiesMap = Object.fromEntries(
  adminEntities.map(e => [e.key, e])
);
