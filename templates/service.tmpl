package port

import (
        "context"
        "log/slog"
        "fmt"
        {{- if or (HasEventMethods .Service) (HasDomainTypes .Service) }}
        "{{ .GoModule }}/internal/domain"
        {{- end }}
)

{{- define "validator" }}
func (d *{{ .Name }}) Validate() error {
        return nil
}
{{- end }}

{{ ServiceInterfaceDecl .Service }}

// Request/Response DTOs
{{- range .Service.Methods }}
{{- if not (EventForMethod $.Service .) }}
type {{ .Input.Name }} struct {
        {{- range .Input.Fields }}
        {{ .Name | ExportName }} {{ .Type }} `json:"{{ JSONName .Name }}"`
        {{- end }}
}
{{ template "validator" .Input }}
{{- end }}
{{- if and .Output.Name (not (EventForMethod $.Service .)) }}
type {{ .Output.Name }} struct {
        {{- range .Output.Fields }}
        {{ .Name | ExportName }} {{ .Type }} `json:"{{ JSONName .Name }}"`
        {{- end }}
}
{{ template "validator" .Output }}
{{- end }}
{{- end }}

{{- range ServiceNestedTypes .Service }}
type {{ .Name }} struct {
        {{- range .Fields }}
        {{ .Name | ExportName }} {{ .Type }} `json:"{{ JSONName .Name }}"`
        {{- end }}
}
{{ template "validator" . }}
{{- end }}
