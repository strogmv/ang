// ============================================================================
// AUTO-GENERATED by ANG (Architectural Normalized Generator)
// Version: {{ ANGVersion }}
// DO NOT EDIT - changes will be overwritten on next generation
// ============================================================================

package dto

import (
	"{{ GoModule }}/internal/domain"
{{- range .Imports }}
	"{{ . }}"
{{- end }}
)

// {{ ExportName .Name }}DTO represents the data transfer object.
type {{ ExportName .Name }}DTO struct {
{{- range .Fields }}
	{{ ExportName .Name }} {{ DTOType .Type }} `json:"{{ JSONName .Name }}"`
{{- end }}
}

// ToDomain converts DTO to domain entity.
func (d *{{ ExportName .Name }}DTO) ToDomain() *domain.{{ ExportName .Name }} {
	if d == nil {
		return nil
	}
	return &domain.{{ ExportName .Name }}{
{{- range .Fields }}
		{{ ExportName .Name }}: d.{{ ExportName .Name }},
{{- end }}
	}
}

// FromDomain converts domain entity to DTO.
func (d *{{ ExportName .Name }}DTO) FromDomain(e *domain.{{ ExportName .Name }}) {
	if e == nil {
		return
	}
{{- range .Fields }}
	d.{{ ExportName .Name }} = e.{{ ExportName .Name }}
{{- end }}
}

// ToDTO helper for quick conversion.
func To{{ ExportName .Name }}DTO(e *domain.{{ ExportName .Name }}) *{{ ExportName .Name }}DTO {
	if e == nil {
		return nil
	}
	d := &{{ ExportName .Name }}DTO{}
	d.FromDomain(e)
	return d
}

func (d *{{ ExportName .Name }}DTO) Validate() error {
{{- range .Fields }}
{{- if .Constraints }}
	{{- if .Constraints.Min }}
	if d.{{ ExportName .Name }} < {{ .Constraints.Min }} {
		return fmt.Errorf("field {{ JSONName .Name }} must be >= %v", {{ .Constraints.Min }})
	}
	{{- end }}
	{{- if .Constraints.Max }}
	if d.{{ ExportName .Name }} > {{ .Constraints.Max }} {
		return fmt.Errorf("field {{ JSONName .Name }} must be <= %v", {{ .Constraints.Max }})
	}
	{{- end }}
	{{- if .Constraints.MinLen }}
	if len(d.{{ ExportName .Name }}) < {{ .Constraints.MinLen }} {
		return fmt.Errorf("field {{ JSONName .Name }} length must be >= %v", {{ .Constraints.MinLen }})
	}
	{{- end }}
	{{- if .Constraints.MaxLen }}
	if len(d.{{ ExportName .Name }}) > {{ .Constraints.MaxLen }} {
		return fmt.Errorf("field {{ JSONName .Name }} length must be <= %v", {{ .Constraints.MaxLen }})
	}
	{{- end }}
{{- end }}
{{- end }}
	return nil
}
