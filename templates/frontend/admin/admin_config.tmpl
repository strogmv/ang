// Generated by ANG. Do not edit.
import { lazy, ComponentType } from 'react';

export interface AdminEntityConfig {
  key: string;
  title: string;
  routePath: string;
  listQueryKey: [string, string];
  useListQuery: () => any;
  TableComponent: ComponentType<any>;
  createFormName?: string;
  updateFormName?: string;
  useDeleteMutation?: () => any;
  deleteIdField?: string;
  updateIdField?: string; // Maps row.id to this field name for update form
}

// Lazy load components
{{- range .Entities }}
const {{ .TableComponent }} = lazy(() => import('@sdk/components/tables').then(m => ({ default: m.{{ .TableComponent }} })));
{{- end }}

// Import hooks
{{- range .Entities }}
import { use{{ .ListRPC }} } from '@sdk/hooks';
{{- if .HasDelete }}
import { use{{ .DeleteRPC }} } from '@sdk/hooks';
{{- end }}
{{- end }}

export const adminEntities: AdminEntityConfig[] = [
{{- range .Entities }}
  {
    key: '{{ .Key }}',
    title: '{{ .Title }}',
    routePath: '{{ .RoutePath }}',
    listQueryKey: ['{{ .ServiceName }}', '{{ .ListRPC }}'],
    useListQuery: use{{ .ListRPC }},
    TableComponent: {{ .TableComponent }},
{{- if .HasCreate }}
    createFormName: '{{ .CreateFormComponent }}',
{{- end }}
{{- if .HasUpdate }}
    updateFormName: '{{ .UpdateFormComponent }}',
{{- if .UpdateIDField }}
    updateIdField: '{{ .UpdateIDField }}',
{{- end }}
{{- end }}
{{- if .HasDelete }}
    useDeleteMutation: use{{ .DeleteRPC }},
    deleteIdField: '{{ .DeleteIDField }}',
{{- end }}
  },
{{- end }}
];

export const adminEntitiesMap = Object.fromEntries(
  adminEntities.map(e => [e.key, e])
);
