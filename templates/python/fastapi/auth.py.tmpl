"""Auth wiring generated by ANG."""

from __future__ import annotations

from app.security.refresh_store import RefreshTokenStore
from app.security.refresh_store_memory import MemoryRefreshTokenStore
from app.security.refresh_store_postgres import PostgresRefreshTokenStore

_refresh_store: RefreshTokenStore | None = None


def get_refresh_store() -> RefreshTokenStore:
    global _refresh_store
    if _refresh_store is None:
{{- if eq .StoreMode "postgres" }}
        _refresh_store = PostgresRefreshTokenStore()
{{- else }}
        _refresh_store = MemoryRefreshTokenStore()
{{- end }}
    return _refresh_store
