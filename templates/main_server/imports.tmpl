{{ define "main_server_imports" }}
{{- $needsPG := or .HasSQL (gt (len (AllUsedRepoEntitiesIR .ServicesIR .EntitiesIR)) 0) }}
import (
	"context"
	"net/http"
	"os"
	"os/signal"
	"syscall"
	"time"
	{{ if and .AuthService (HasEntityByNameIR .EntitiesIR "User") }}"strings"{{ end }}
	{{ if .HasNats }}"encoding/json"{{ end }}

	"github.com/go-chi/chi/v5"
	"github.com/go-chi/chi/v5/middleware"
	"github.com/go-chi/cors"
	"github.com/prometheus/client_golang/prometheus/promhttp"

	{{ if $needsPG }}"github.com/jackc/pgx/v5/pgxpool"{{ end }}
	redisv9 "github.com/redis/go-redis/v9"
	{{ if .HasMongo }}
	"go.mongodb.org/mongo-driver/mongo"
	"go.mongodb.org/mongo-driver/mongo/options"
	{{ end }}

	{{ if or .HasCache (or (eq .AuthRefreshStore "redis") (eq .AuthRefreshStore "hybrid")) }}cacheRedis "{{.GoModule}}/internal/adapter/cache/redis"{{ end }}
	{{ if .HasNats }}
	"{{.GoModule}}/internal/adapter/events/nats"
	"{{.GoModule}}/internal/domain"
	{{ end }}
	{{ if .HasS3 }}
	"{{.GoModule}}/internal/adapter/storage/s3"
	{{ end }}
	{{ if or .HasNotificationsService .HasNotificationDispatch }}
	"{{.GoModule}}/internal/adapter/notifications"
	{{ end }}
	"{{.GoModule}}/internal/bootstrap"
	"{{.GoModule}}/internal/config"
	"{{.GoModule}}/internal/pkg/logger"
	"{{.GoModule}}/internal/pkg/tracing"
	{{ if .HasScheduler }}
	"{{.GoModule}}/internal/scheduler"
	{{ end }}
	"{{.GoModule}}/internal/port"
	transport "{{.GoModule}}/internal/transport/http"
	{{- if .NotificationMuting }}
	"{{.GoModule}}/internal/adapter"
	{{- end }}
	"go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp"
)
{{ end }}
