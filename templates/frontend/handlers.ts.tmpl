// Generated by ANG. Do not edit.
import { http, HttpResponse, ws } from 'msw';

{{- range .Endpoints }}
{{- if eq .Method "WS" }}
const {{ .RPC | LowerFirst }}Link = ws.link('*/{{ RouterPath .Path }}');
{{- end }}
{{- end }}

export const handlers = [
{{- range .Endpoints }}
{{- if eq .Method "WS" }}
  {{ .RPC | LowerFirst }}Link.addEventListener('connection', () => {}),
{{- end }}
{{- end }}
{{- range .Endpoints }}
{{- if ne .Method "WS" }}
  http.{{ .Method | ToLower }}('*/{{ RouterPath .Path }}', () => {
    return HttpResponse.json({
      {{- $outName := printf "%sResponse" .RPC }}
      {{- $entity := GetEntity $outName }}
      {{- if not $entity }}
          {{- $baseName := .RPC | Replace "Get" "" | Replace "Edit" "" | Replace "Update" "" | Replace "Create" "" }}
          {{- $entity = GetEntity $baseName }}
          {{- if not $entity }}
             {{- $entity = GetEntity (printf "%sResponse" $baseName) }}
          {{- end }}
      {{- end }}

      {{- if $entity }}
        {{- range $entity.Fields }}
        {{ .Name }}: {{ MockValue . }},
        {{- end }}
      {{- else }}
        // Could not find entity definition for {{ .RPC }} (Tried: {{ $outName }}, {{ .RPC | Replace "Get" "" }}...)
        message: "Mocked response for {{ .RPC }}",
        timestamp: new Date().toISOString(),
      {{- end }}
    });
  }),
{{- end }}
{{- end }}
];
